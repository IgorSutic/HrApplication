{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month.js)\r\n * Version: 21.1.6\r\n * Build date: Mon Sep 27 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport HorizontalMonthLineAppointmentsStrategy from \"./ui.scheduler.appointments.strategy.horizontal_month_line\";\nvar MONTH_APPOINTMENT_HEIGHT_RATIO = .6;\nvar MONTH_APPOINTMENT_MIN_OFFSET = 26;\nvar MONTH_APPOINTMENT_MAX_OFFSET = 30;\nvar MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET = 36;\nvar MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET = 60;\n\nclass HorizontalMonthRenderingStrategy extends HorizontalMonthLineAppointmentsStrategy {\n  _getLeftPosition(settings) {\n    var fullWeekAppointmentWidth = this._getFullWeekAppointmentWidth(settings.groupIndex);\n\n    var result = this._calculateMultiWeekAppointmentLeftOffset(settings.hMax, fullWeekAppointmentWidth);\n\n    if (\"vertical\" === this.instance._groupOrientation) {\n      result += this.instance.fire(\"getWorkSpaceDateTableOffset\");\n    }\n\n    return result;\n  }\n\n  _getChunkCount(fullChunksWidth, firstChunkWidth, weekWidth) {\n    var rawFullChunksWidth = fullChunksWidth - firstChunkWidth + weekWidth;\n    return Math.ceil(rawFullChunksWidth / weekWidth);\n  }\n\n  _getChunkWidths(geometry) {\n    var firstChunkWidth = geometry.reducedWidth;\n    var fullChunksWidth = Math.floor(geometry.sourceAppointmentWidth);\n    var widthWithoutFirstChunk = fullChunksWidth - firstChunkWidth;\n    return [firstChunkWidth, fullChunksWidth, widthWithoutFirstChunk];\n  }\n\n  _getTailChunkSettings(withoutFirstChunkWidth, weekWidth, leftPosition) {\n    var tailChunkWidth = withoutFirstChunkWidth % weekWidth || weekWidth;\n    var rtlPosition = leftPosition + (weekWidth - tailChunkWidth);\n    var tailChunkLeftPosition = this._isRtl() ? rtlPosition : leftPosition;\n    return [tailChunkWidth, tailChunkLeftPosition];\n  }\n\n  _getAppointmentParts(geometry, settings) {\n    var result = [];\n    var weekWidth = Math.round(this._getFullWeekAppointmentWidth(settings.groupIndex));\n\n    var [firstChunkWidth, fullChunksWidth, withoutFirstChunkWidth] = this._getChunkWidths(geometry, settings, weekWidth);\n\n    var leftPosition = this._getLeftPosition(settings);\n\n    var hasTailChunk = this.instance.fire(\"getEndViewDate\") > settings.info.appointment.endDate;\n\n    var chunkCount = this._getChunkCount(fullChunksWidth, firstChunkWidth, weekWidth);\n\n    var [tailChunkWidth, tailChunkLeftPosition] = this._getTailChunkSettings(withoutFirstChunkWidth, weekWidth, leftPosition);\n\n    for (var chunkIndex = 1; chunkIndex < chunkCount; chunkIndex++) {\n      var topPosition = settings.top + this.getDefaultCellHeight() * chunkIndex;\n      var isTailChunk = hasTailChunk && chunkIndex === chunkCount - 1;\n      result.push(_extends({}, settings, {\n        top: topPosition,\n        left: isTailChunk ? tailChunkLeftPosition : leftPosition,\n        height: geometry.height,\n        width: isTailChunk ? tailChunkWidth : weekWidth,\n        appointmentReduced: isTailChunk ? \"tail\" : \"body\",\n        rowIndex: ++settings.rowIndex,\n        cellIndex: 0\n      }));\n    }\n\n    return result;\n  }\n\n  _calculateMultiWeekAppointmentLeftOffset(max, width) {\n    return this._isRtl() ? max : max - width;\n  }\n\n  _getFullWeekAppointmentWidth(groupIndex) {\n    this._maxFullWeekAppointmentWidth = this.instance.fire(\"getFullWeekAppointmentWidth\", {\n      groupIndex: groupIndex\n    });\n    return this._maxFullWeekAppointmentWidth;\n  }\n\n  _getAppointmentDefaultHeight() {\n    return this._getAppointmentHeightByTheme();\n  }\n\n  _getAppointmentMinHeight() {\n    return this._getAppointmentDefaultHeight();\n  }\n\n  _columnCondition(a, b) {\n    var conditions = this._getConditions(a, b);\n\n    return conditions.rowCondition || conditions.columnCondition || conditions.cellPositionCondition;\n  }\n\n  createTaskPositionMap(items) {\n    return super.createTaskPositionMap(items, true);\n  }\n\n  _getSortedPositions(map) {\n    return super._getSortedPositions(map, true);\n  }\n\n  _getDefaultRatio() {\n    return MONTH_APPOINTMENT_HEIGHT_RATIO;\n  }\n\n  _getOffsets() {\n    return {\n      unlimited: MONTH_APPOINTMENT_MIN_OFFSET,\n      auto: MONTH_APPOINTMENT_MAX_OFFSET\n    };\n  }\n\n  getDropDownAppointmentWidth(intervalCount) {\n    if (this.instance.fire(\"isAdaptive\")) {\n      return this.getDropDownButtonAdaptiveSize();\n    }\n\n    var offset = intervalCount > 1 ? MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET : MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET;\n    return this.getDefaultCellWidth() - offset;\n  }\n\n  needCorrectAppointmentDates() {\n    return false;\n  }\n\n  _needVerticalGroupBounds() {\n    return false;\n  }\n\n  _needHorizontalGroupBounds() {\n    return true;\n  }\n\n}\n\nexport default HorizontalMonthRenderingStrategy;","map":{"version":3,"sources":["/home/igor/node_modules/devextreme/esm/ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month.js"],"names":["_extends","HorizontalMonthLineAppointmentsStrategy","MONTH_APPOINTMENT_HEIGHT_RATIO","MONTH_APPOINTMENT_MIN_OFFSET","MONTH_APPOINTMENT_MAX_OFFSET","MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET","MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET","HorizontalMonthRenderingStrategy","_getLeftPosition","settings","fullWeekAppointmentWidth","_getFullWeekAppointmentWidth","groupIndex","result","_calculateMultiWeekAppointmentLeftOffset","hMax","instance","_groupOrientation","fire","_getChunkCount","fullChunksWidth","firstChunkWidth","weekWidth","rawFullChunksWidth","Math","ceil","_getChunkWidths","geometry","reducedWidth","floor","sourceAppointmentWidth","widthWithoutFirstChunk","_getTailChunkSettings","withoutFirstChunkWidth","leftPosition","tailChunkWidth","rtlPosition","tailChunkLeftPosition","_isRtl","_getAppointmentParts","round","hasTailChunk","info","appointment","endDate","chunkCount","chunkIndex","topPosition","top","getDefaultCellHeight","isTailChunk","push","left","height","width","appointmentReduced","rowIndex","cellIndex","max","_maxFullWeekAppointmentWidth","_getAppointmentDefaultHeight","_getAppointmentHeightByTheme","_getAppointmentMinHeight","_columnCondition","a","b","conditions","_getConditions","rowCondition","columnCondition","cellPositionCondition","createTaskPositionMap","items","_getSortedPositions","map","_getDefaultRatio","_getOffsets","unlimited","auto","getDropDownAppointmentWidth","intervalCount","getDropDownButtonAdaptiveSize","offset","getDefaultCellWidth","needCorrectAppointmentDates","_needVerticalGroupBounds","_needHorizontalGroupBounds"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month.js)\r\n * Version: 21.1.6\r\n * Build date: Mon Sep 27 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport HorizontalMonthLineAppointmentsStrategy from \"./ui.scheduler.appointments.strategy.horizontal_month_line\";\r\nvar MONTH_APPOINTMENT_HEIGHT_RATIO = .6;\r\nvar MONTH_APPOINTMENT_MIN_OFFSET = 26;\r\nvar MONTH_APPOINTMENT_MAX_OFFSET = 30;\r\nvar MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET = 36;\r\nvar MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET = 60;\r\nclass HorizontalMonthRenderingStrategy extends HorizontalMonthLineAppointmentsStrategy {\r\n    _getLeftPosition(settings) {\r\n        var fullWeekAppointmentWidth = this._getFullWeekAppointmentWidth(settings.groupIndex);\r\n        var result = this._calculateMultiWeekAppointmentLeftOffset(settings.hMax, fullWeekAppointmentWidth);\r\n        if (\"vertical\" === this.instance._groupOrientation) {\r\n            result += this.instance.fire(\"getWorkSpaceDateTableOffset\")\r\n        }\r\n        return result\r\n    }\r\n    _getChunkCount(fullChunksWidth, firstChunkWidth, weekWidth) {\r\n        var rawFullChunksWidth = fullChunksWidth - firstChunkWidth + weekWidth;\r\n        return Math.ceil(rawFullChunksWidth / weekWidth)\r\n    }\r\n    _getChunkWidths(geometry) {\r\n        var firstChunkWidth = geometry.reducedWidth;\r\n        var fullChunksWidth = Math.floor(geometry.sourceAppointmentWidth);\r\n        var widthWithoutFirstChunk = fullChunksWidth - firstChunkWidth;\r\n        return [firstChunkWidth, fullChunksWidth, widthWithoutFirstChunk]\r\n    }\r\n    _getTailChunkSettings(withoutFirstChunkWidth, weekWidth, leftPosition) {\r\n        var tailChunkWidth = withoutFirstChunkWidth % weekWidth || weekWidth;\r\n        var rtlPosition = leftPosition + (weekWidth - tailChunkWidth);\r\n        var tailChunkLeftPosition = this._isRtl() ? rtlPosition : leftPosition;\r\n        return [tailChunkWidth, tailChunkLeftPosition]\r\n    }\r\n    _getAppointmentParts(geometry, settings) {\r\n        var result = [];\r\n        var weekWidth = Math.round(this._getFullWeekAppointmentWidth(settings.groupIndex));\r\n        var [firstChunkWidth, fullChunksWidth, withoutFirstChunkWidth] = this._getChunkWidths(geometry, settings, weekWidth);\r\n        var leftPosition = this._getLeftPosition(settings);\r\n        var hasTailChunk = this.instance.fire(\"getEndViewDate\") > settings.info.appointment.endDate;\r\n        var chunkCount = this._getChunkCount(fullChunksWidth, firstChunkWidth, weekWidth);\r\n        var [tailChunkWidth, tailChunkLeftPosition] = this._getTailChunkSettings(withoutFirstChunkWidth, weekWidth, leftPosition);\r\n        for (var chunkIndex = 1; chunkIndex < chunkCount; chunkIndex++) {\r\n            var topPosition = settings.top + this.getDefaultCellHeight() * chunkIndex;\r\n            var isTailChunk = hasTailChunk && chunkIndex === chunkCount - 1;\r\n            result.push(_extends({}, settings, {\r\n                top: topPosition,\r\n                left: isTailChunk ? tailChunkLeftPosition : leftPosition,\r\n                height: geometry.height,\r\n                width: isTailChunk ? tailChunkWidth : weekWidth,\r\n                appointmentReduced: isTailChunk ? \"tail\" : \"body\",\r\n                rowIndex: ++settings.rowIndex,\r\n                cellIndex: 0\r\n            }))\r\n        }\r\n        return result\r\n    }\r\n    _calculateMultiWeekAppointmentLeftOffset(max, width) {\r\n        return this._isRtl() ? max : max - width\r\n    }\r\n    _getFullWeekAppointmentWidth(groupIndex) {\r\n        this._maxFullWeekAppointmentWidth = this.instance.fire(\"getFullWeekAppointmentWidth\", {\r\n            groupIndex: groupIndex\r\n        });\r\n        return this._maxFullWeekAppointmentWidth\r\n    }\r\n    _getAppointmentDefaultHeight() {\r\n        return this._getAppointmentHeightByTheme()\r\n    }\r\n    _getAppointmentMinHeight() {\r\n        return this._getAppointmentDefaultHeight()\r\n    }\r\n    _columnCondition(a, b) {\r\n        var conditions = this._getConditions(a, b);\r\n        return conditions.rowCondition || conditions.columnCondition || conditions.cellPositionCondition\r\n    }\r\n    createTaskPositionMap(items) {\r\n        return super.createTaskPositionMap(items, true)\r\n    }\r\n    _getSortedPositions(map) {\r\n        return super._getSortedPositions(map, true)\r\n    }\r\n    _getDefaultRatio() {\r\n        return MONTH_APPOINTMENT_HEIGHT_RATIO\r\n    }\r\n    _getOffsets() {\r\n        return {\r\n            unlimited: MONTH_APPOINTMENT_MIN_OFFSET,\r\n            auto: MONTH_APPOINTMENT_MAX_OFFSET\r\n        }\r\n    }\r\n    getDropDownAppointmentWidth(intervalCount) {\r\n        if (this.instance.fire(\"isAdaptive\")) {\r\n            return this.getDropDownButtonAdaptiveSize()\r\n        }\r\n        var offset = intervalCount > 1 ? MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET : MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET;\r\n        return this.getDefaultCellWidth() - offset\r\n    }\r\n    needCorrectAppointmentDates() {\r\n        return false\r\n    }\r\n    _needVerticalGroupBounds() {\r\n        return false\r\n    }\r\n    _needHorizontalGroupBounds() {\r\n        return true\r\n    }\r\n}\r\nexport default HorizontalMonthRenderingStrategy;\r\n"]},"metadata":{},"sourceType":"module"}