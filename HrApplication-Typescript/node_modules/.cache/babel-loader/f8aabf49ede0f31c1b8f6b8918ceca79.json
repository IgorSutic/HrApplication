{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/form/components/field_item.js)\r\n * Version: 21.1.6\r\n * Build date: Mon Sep 27 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { name as clickEventName } from \"../../../events/click\";\nimport { getPublicElement } from \"../../../core/element\";\nimport { captionize } from \"../../../core/utils/inflector\";\nimport { format } from \"../../../core/utils/string\";\nimport { isDefined } from \"../../../core/utils/type\";\nimport { isMaterial } from \"../../themes\";\nimport errors from \"../../widget/ui.errors\";\nimport Validator from \"../../validator\";\nimport { FIELD_ITEM_CONTENT_CLASS } from \"../constants\";\nexport var FLEX_LAYOUT_CLASS = \"dx-flex-layout\";\nexport var FIELD_ITEM_OPTIONAL_CLASS = \"dx-field-item-optional\";\nexport var FIELD_ITEM_REQUIRED_CLASS = \"dx-field-item-required\";\nexport var FIELD_ITEM_CONTENT_WRAPPER_CLASS = \"dx-field-item-content-wrapper\";\nexport var FIELD_ITEM_CONTENT_LOCATION_CLASS = \"dx-field-item-content-location-\";\nexport var FIELD_ITEM_LABEL_ALIGN_CLASS = \"dx-field-item-label-align\";\nexport var FIELD_ITEM_HELP_TEXT_CLASS = \"dx-field-item-help-text\";\nexport var LABEL_VERTICAL_ALIGNMENT_CLASS = \"dx-label-v-align\";\nexport var LABEL_HORIZONTAL_ALIGNMENT_CLASS = \"dx-label-h-align\";\nimport { renderLabel } from \"./label\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar INVALID_CLASS = \"dx-invalid\";\nexport function renderFieldItemTo(_ref) {\n  var {\n    $container: $container,\n    containerCssClass: containerCssClass,\n    parentComponent: parentComponent,\n    createComponentCallback: createComponentCallback,\n    useFlexLayout: useFlexLayout,\n    labelOptions: labelOptions,\n    labelNeedBaselineAlign: labelNeedBaselineAlign,\n    labelLocation: labelLocation,\n    needRenderLabel: needRenderLabel,\n    formLabelLocation: formLabelLocation,\n    item: item,\n    editorOptions: editorOptions,\n    isSimpleItem: isSimpleItem,\n    isRequired: isRequired,\n    template: template,\n    helpID: helpID,\n    labelID: labelID,\n    name: name,\n    helpText: helpText,\n    requiredMessageTemplate: requiredMessageTemplate,\n    validationGroup: validationGroup\n  } = _ref;\n  $container.addClass(containerCssClass).addClass(isDefined(item.col) ? \"dx-col-\" + item.col : \"\");\n  $container.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);\n\n  if (isSimpleItem && useFlexLayout) {\n    $container.addClass(FLEX_LAYOUT_CLASS);\n  }\n\n  if (isSimpleItem && labelNeedBaselineAlign) {\n    $container.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS);\n  }\n\n  var $fieldEditorContainer = $(\"<div>\");\n  $fieldEditorContainer.data(\"dx-form-item\", item);\n  $fieldEditorContainer.addClass(FIELD_ITEM_CONTENT_CLASS).addClass(FIELD_ITEM_CONTENT_LOCATION_CLASS + {\n    right: \"left\",\n    left: \"right\",\n    top: \"bottom\"\n  }[formLabelLocation]);\n  var $label = needRenderLabel ? renderLabel(labelOptions) : null;\n\n  if ($label) {\n    $container.append($label);\n\n    if (\"top\" === labelLocation || \"left\" === labelLocation) {\n      $container.append($fieldEditorContainer);\n    }\n\n    if (\"right\" === labelLocation) {\n      $container.prepend($fieldEditorContainer);\n    }\n\n    if (\"top\" === labelLocation) {\n      $container.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS);\n    } else {\n      $container.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS);\n    }\n\n    if (\"dxCheckBox\" === item.editorType || \"dxSwitch\" === item.editorType) {\n      eventsEngine.on($label, clickEventName, function () {\n        eventsEngine.trigger($fieldEditorContainer.children(), clickEventName);\n      });\n    }\n  } else {\n    $container.append($fieldEditorContainer);\n  }\n\n  var instance;\n\n  if (template) {\n    template.render({\n      container: getPublicElement($fieldEditorContainer),\n      model: {\n        dataField: item.dataField,\n        editorType: item.editorType,\n        editorOptions: editorOptions,\n        component: parentComponent,\n        name: item.name\n      }\n    });\n  } else {\n    var $div = $(\"<div>\").appendTo($fieldEditorContainer);\n\n    try {\n      instance = createComponentCallback($div, item.editorType, editorOptions);\n      instance.setAria(\"describedby\", helpID);\n      instance.setAria(\"labelledby\", labelID);\n      instance.setAria(\"required\", isRequired);\n    } catch (e) {\n      errors.log(\"E1035\", e.message);\n    }\n  }\n\n  var editorElem = $fieldEditorContainer.children().first();\n  var $validationTarget = editorElem.hasClass(TEMPLATE_WRAPPER_CLASS) ? editorElem.children().first() : editorElem;\n  var validationTargetInstance = $validationTarget && $validationTarget.data(\"dx-validation-target\");\n\n  if (validationTargetInstance) {\n    var isItemHaveCustomLabel = item.label && item.label.text;\n    var itemName = isItemHaveCustomLabel ? null : name;\n    var fieldName = isItemHaveCustomLabel ? item.label.text : itemName && captionize(itemName);\n    var validationRules;\n\n    if (isSimpleItem) {\n      if (item.validationRules) {\n        validationRules = item.validationRules;\n      } else {\n        var requiredMessage = format(requiredMessageTemplate, fieldName || \"\");\n        validationRules = item.isRequired ? [{\n          type: \"required\",\n          message: requiredMessage\n        }] : null;\n      }\n    }\n\n    if (Array.isArray(validationRules) && validationRules.length) {\n      createComponentCallback($validationTarget, Validator, {\n        validationRules: validationRules,\n        validationGroup: validationGroup,\n        dataGetter: function () {\n          return {\n            formItem: item\n          };\n        }\n      });\n    }\n\n    if (isMaterial()) {\n      var wrapperClass = \".\" + FIELD_ITEM_CONTENT_WRAPPER_CLASS;\n\n      var toggleInvalidClass = function (e) {\n        $(e.element).parents(wrapperClass).toggleClass(INVALID_CLASS, false === e.component.option(\"isValid\") && (e.component._isFocused() || \"always\" === e.component.option(\"validationMessageMode\")));\n      };\n\n      validationTargetInstance.on(\"optionChanged\", e => {\n        if (\"isValid\" !== e.name) {\n          return;\n        }\n\n        toggleInvalidClass(e);\n      });\n      validationTargetInstance.on(\"focusIn\", toggleInvalidClass).on(\"focusOut\", toggleInvalidClass).on(\"enterKey\", toggleInvalidClass);\n    }\n  }\n\n  if (helpText && isSimpleItem) {\n    var $editorParent = $fieldEditorContainer.parent();\n    $editorParent.append($(\"<div>\").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS).append($fieldEditorContainer).append($(\"<div>\").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr(\"id\", helpID).text(helpText)));\n  }\n\n  return {\n    $fieldEditorContainer: $fieldEditorContainer,\n    instance: instance\n  };\n}","map":{"version":3,"sources":["/home/igor/node_modules/devextreme/esm/ui/form/components/field_item.js"],"names":["$","eventsEngine","name","clickEventName","getPublicElement","captionize","format","isDefined","isMaterial","errors","Validator","FIELD_ITEM_CONTENT_CLASS","FLEX_LAYOUT_CLASS","FIELD_ITEM_OPTIONAL_CLASS","FIELD_ITEM_REQUIRED_CLASS","FIELD_ITEM_CONTENT_WRAPPER_CLASS","FIELD_ITEM_CONTENT_LOCATION_CLASS","FIELD_ITEM_LABEL_ALIGN_CLASS","FIELD_ITEM_HELP_TEXT_CLASS","LABEL_VERTICAL_ALIGNMENT_CLASS","LABEL_HORIZONTAL_ALIGNMENT_CLASS","renderLabel","TEMPLATE_WRAPPER_CLASS","INVALID_CLASS","renderFieldItemTo","_ref","$container","containerCssClass","parentComponent","createComponentCallback","useFlexLayout","labelOptions","labelNeedBaselineAlign","labelLocation","needRenderLabel","formLabelLocation","item","editorOptions","isSimpleItem","isRequired","template","helpID","labelID","helpText","requiredMessageTemplate","validationGroup","addClass","col","$fieldEditorContainer","data","right","left","top","$label","append","prepend","editorType","on","trigger","children","instance","render","container","model","dataField","component","$div","appendTo","setAria","e","log","message","editorElem","first","$validationTarget","hasClass","validationTargetInstance","isItemHaveCustomLabel","label","text","itemName","fieldName","validationRules","requiredMessage","type","Array","isArray","length","dataGetter","formItem","wrapperClass","toggleInvalidClass","element","parents","toggleClass","option","_isFocused","$editorParent","parent","attr"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/form/components/field_item.js)\r\n * Version: 21.1.6\r\n * Build date: Mon Sep 27 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../../events/click\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport {\r\n    captionize\r\n} from \"../../../core/utils/inflector\";\r\nimport {\r\n    format\r\n} from \"../../../core/utils/string\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    isMaterial\r\n} from \"../../themes\";\r\nimport errors from \"../../widget/ui.errors\";\r\nimport Validator from \"../../validator\";\r\nimport {\r\n    FIELD_ITEM_CONTENT_CLASS\r\n} from \"../constants\";\r\nexport var FLEX_LAYOUT_CLASS = \"dx-flex-layout\";\r\nexport var FIELD_ITEM_OPTIONAL_CLASS = \"dx-field-item-optional\";\r\nexport var FIELD_ITEM_REQUIRED_CLASS = \"dx-field-item-required\";\r\nexport var FIELD_ITEM_CONTENT_WRAPPER_CLASS = \"dx-field-item-content-wrapper\";\r\nexport var FIELD_ITEM_CONTENT_LOCATION_CLASS = \"dx-field-item-content-location-\";\r\nexport var FIELD_ITEM_LABEL_ALIGN_CLASS = \"dx-field-item-label-align\";\r\nexport var FIELD_ITEM_HELP_TEXT_CLASS = \"dx-field-item-help-text\";\r\nexport var LABEL_VERTICAL_ALIGNMENT_CLASS = \"dx-label-v-align\";\r\nexport var LABEL_HORIZONTAL_ALIGNMENT_CLASS = \"dx-label-h-align\";\r\nimport {\r\n    renderLabel\r\n} from \"./label\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar INVALID_CLASS = \"dx-invalid\";\r\nexport function renderFieldItemTo(_ref) {\r\n    var {\r\n        $container: $container,\r\n        containerCssClass: containerCssClass,\r\n        parentComponent: parentComponent,\r\n        createComponentCallback: createComponentCallback,\r\n        useFlexLayout: useFlexLayout,\r\n        labelOptions: labelOptions,\r\n        labelNeedBaselineAlign: labelNeedBaselineAlign,\r\n        labelLocation: labelLocation,\r\n        needRenderLabel: needRenderLabel,\r\n        formLabelLocation: formLabelLocation,\r\n        item: item,\r\n        editorOptions: editorOptions,\r\n        isSimpleItem: isSimpleItem,\r\n        isRequired: isRequired,\r\n        template: template,\r\n        helpID: helpID,\r\n        labelID: labelID,\r\n        name: name,\r\n        helpText: helpText,\r\n        requiredMessageTemplate: requiredMessageTemplate,\r\n        validationGroup: validationGroup\r\n    } = _ref;\r\n    $container.addClass(containerCssClass).addClass(isDefined(item.col) ? \"dx-col-\" + item.col : \"\");\r\n    $container.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);\r\n    if (isSimpleItem && useFlexLayout) {\r\n        $container.addClass(FLEX_LAYOUT_CLASS)\r\n    }\r\n    if (isSimpleItem && labelNeedBaselineAlign) {\r\n        $container.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS)\r\n    }\r\n    var $fieldEditorContainer = $(\"<div>\");\r\n    $fieldEditorContainer.data(\"dx-form-item\", item);\r\n    $fieldEditorContainer.addClass(FIELD_ITEM_CONTENT_CLASS).addClass(FIELD_ITEM_CONTENT_LOCATION_CLASS + {\r\n        right: \"left\",\r\n        left: \"right\",\r\n        top: \"bottom\"\r\n    } [formLabelLocation]);\r\n    var $label = needRenderLabel ? renderLabel(labelOptions) : null;\r\n    if ($label) {\r\n        $container.append($label);\r\n        if (\"top\" === labelLocation || \"left\" === labelLocation) {\r\n            $container.append($fieldEditorContainer)\r\n        }\r\n        if (\"right\" === labelLocation) {\r\n            $container.prepend($fieldEditorContainer)\r\n        }\r\n        if (\"top\" === labelLocation) {\r\n            $container.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS)\r\n        } else {\r\n            $container.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS)\r\n        }\r\n        if (\"dxCheckBox\" === item.editorType || \"dxSwitch\" === item.editorType) {\r\n            eventsEngine.on($label, clickEventName, (function() {\r\n                eventsEngine.trigger($fieldEditorContainer.children(), clickEventName)\r\n            }))\r\n        }\r\n    } else {\r\n        $container.append($fieldEditorContainer)\r\n    }\r\n    var instance;\r\n    if (template) {\r\n        template.render({\r\n            container: getPublicElement($fieldEditorContainer),\r\n            model: {\r\n                dataField: item.dataField,\r\n                editorType: item.editorType,\r\n                editorOptions: editorOptions,\r\n                component: parentComponent,\r\n                name: item.name\r\n            }\r\n        })\r\n    } else {\r\n        var $div = $(\"<div>\").appendTo($fieldEditorContainer);\r\n        try {\r\n            instance = createComponentCallback($div, item.editorType, editorOptions);\r\n            instance.setAria(\"describedby\", helpID);\r\n            instance.setAria(\"labelledby\", labelID);\r\n            instance.setAria(\"required\", isRequired)\r\n        } catch (e) {\r\n            errors.log(\"E1035\", e.message)\r\n        }\r\n    }\r\n    var editorElem = $fieldEditorContainer.children().first();\r\n    var $validationTarget = editorElem.hasClass(TEMPLATE_WRAPPER_CLASS) ? editorElem.children().first() : editorElem;\r\n    var validationTargetInstance = $validationTarget && $validationTarget.data(\"dx-validation-target\");\r\n    if (validationTargetInstance) {\r\n        var isItemHaveCustomLabel = item.label && item.label.text;\r\n        var itemName = isItemHaveCustomLabel ? null : name;\r\n        var fieldName = isItemHaveCustomLabel ? item.label.text : itemName && captionize(itemName);\r\n        var validationRules;\r\n        if (isSimpleItem) {\r\n            if (item.validationRules) {\r\n                validationRules = item.validationRules\r\n            } else {\r\n                var requiredMessage = format(requiredMessageTemplate, fieldName || \"\");\r\n                validationRules = item.isRequired ? [{\r\n                    type: \"required\",\r\n                    message: requiredMessage\r\n                }] : null\r\n            }\r\n        }\r\n        if (Array.isArray(validationRules) && validationRules.length) {\r\n            createComponentCallback($validationTarget, Validator, {\r\n                validationRules: validationRules,\r\n                validationGroup: validationGroup,\r\n                dataGetter: function() {\r\n                    return {\r\n                        formItem: item\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (isMaterial()) {\r\n            var wrapperClass = \".\" + FIELD_ITEM_CONTENT_WRAPPER_CLASS;\r\n            var toggleInvalidClass = function(e) {\r\n                $(e.element).parents(wrapperClass).toggleClass(INVALID_CLASS, false === e.component.option(\"isValid\") && (e.component._isFocused() || \"always\" === e.component.option(\"validationMessageMode\")))\r\n            };\r\n            validationTargetInstance.on(\"optionChanged\", e => {\r\n                if (\"isValid\" !== e.name) {\r\n                    return\r\n                }\r\n                toggleInvalidClass(e)\r\n            });\r\n            validationTargetInstance.on(\"focusIn\", toggleInvalidClass).on(\"focusOut\", toggleInvalidClass).on(\"enterKey\", toggleInvalidClass)\r\n        }\r\n    }\r\n    if (helpText && isSimpleItem) {\r\n        var $editorParent = $fieldEditorContainer.parent();\r\n        $editorParent.append($(\"<div>\").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS).append($fieldEditorContainer).append($(\"<div>\").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr(\"id\", helpID).text(helpText)))\r\n    }\r\n    return {\r\n        $fieldEditorContainer: $fieldEditorContainer,\r\n        instance: instance\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}